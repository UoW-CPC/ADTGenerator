tosca_definitions_version: tosca_simple_yaml_1_2

imports:
- https://raw.githubusercontent.com/micado-scale/tosca/digitbrain/micado_types.yaml

node_types:
  dbs.{{ id }}:
    derived_from: dbs.deployment

topology_template:

  substitution_mappings:
    node_type: dbs.{{ id }}

  node_templates:
    {{ id }}:
      type: tosca.nodes.MiCADO.CloudBroker.Compute
      properties:
        deployment_id: {{ deployment_id }}
        instance_type_id: {{ instance_type_id }}
        key_pair_id: {{ key_pair_id }}
        opened_port: "{{ opened_port }}"

    interfaces:
       Occopus:
         create:
           inputs:
             endpoint: {{ endpoint }}
