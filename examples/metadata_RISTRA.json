{
  "DMA": {
    "id": "DMAID_RISTRA",
    "name": "RISTRA",
    "scope": "RISTRA and rclone for Frauhofner",
    "author": "Maxim",
    "date": "1.12.2021",
    "version": "V1.0.0",
    "MAPair": "MAID_RISTRA",
    "DAssets": [
      "DATAID_RISTRA"
    ],
    "deployments": {
      "MSID_RISTRA": {
	"type": "cloudbroker",
	"cloudbroker": {
          "deployment_id": "16b1e2d4-3a2c-406e-8c45-5637099021f0",
          "instance_type_id": "ca727925-a5ca-4697-b2c3-8788d82457d5",
          "key_pair_id": "22873697-c9ec-4685-bddc-760436662bce",
          "opened_port": "2379,4500,30010,8285,30012,443,10250,30888,30000,6443,22,500,8472,30012,4500,500",
          "endpoint": "https://cloudsme-cbp.scaletools.com.ua"
	}
      }
    }
  },
  "MA": {
    "id": "MAID_RISTRA"
  },
  "DATA": [
    {
      "id": "DATAID_RISTRA"
    },
    {
      "id": "DATAID_RCLONE"
    }
  ],
  "MODEL": {
    "id": "MODELID_RISTRA"
  },
  "ALGORITHM": {
    "id": "ALGID_RISTRA",
    "name": "RISTRA",
    "classificationSchema": "ML",
    "description": "RISTRA and rclone for Frauhofner",
    "author": "Maxim",
    "date": "1.12.2021",
    "version": "V1.0.0",
    "type": [
      "neutral network"
    ],
    "listOfMicroservices": [
      "MSID_RISTRA",
      "MSID_RCLONE"
    ],
    "deploymentMapping": {
      "MSID_RISTRA": "MSID_RISTRA",
      "MSID_RCLONE": "MSID_RISTRA"
    },
    "volumeMapping": {
      "MSID_RISTRA": [
	      "MSID_RCLONE"
      ],
      "MSID_RCLONE": []
    }
  },
  "MICROSERVICES": [
    {
      "id": "MSID_RISTRA",
      "name": "Object Detection Algorithm for detection of faulty weld seams",
      "description": "This algorithm can be used to solve a specifc problem, and applies some fancy technologies.",
      "author": "DFKI",
      "date": "06.04.2021",
      "classificationSchema": "other",
      "type": [
        "neutral network",
        "deep learning",
        "CNN"
      ],
      "deploymentFormat": "docker-compose",
      "deploymentData": {
	      "version": "3.7",
	      "services": {
	      	"ristra": {
    			"image": "dbs-container-repo.emgora.eu/db-ristra-cli-cpu:1.0.0",
			"entrypoint": "/bin/sh -c",
    			"command": "python3 start.py /data/engine_mount.zip",
    			"volumes": [
      			{
				"type": "bind",
        			"source": "/data",
        			"target": "/data",
        			"bind": {
          				"propagation": "rshared"
				}
			}
			],
			"privileged": true
		}
	      }
      },
      "configurationData": {
        "filePath": "/config/rclone/rclone.conf",
        "fileContent": "[s3_server]\ntype = s3\nprovider = AWS\nenv_auth = false\naccess_key_id = ABC123 \nsecret_access_key = BBC123\nregion = eu-central-1\nendpoint =\n",
        "mountPropagation": true
      }
    },
    {
      "id": "MSID_RCLONE",
      "name": "Object Detection Algorithm for detection of faulty weld seams",
      "description": "This algorithm can be used to solve a specifc problem, and applies some fancy technologies.",
      "author": "DFKI",
      "date": "06.04.2021",
      "classificationSchema": "rclone.json",
      "type": [
        "neutral network",
        "deep learning",
        "CNN"
      ],
      "deploymentFormat": "docker-compose",
      "deploymentData": {
	"version": "3.7",
	"services": {
		"rclone": {
			"image": "dbs-container-repo.emgora.eu/rclone:1",
			"entrypoint": "/bin/sh -c",
        		"command": "rclone copy -vv --daemno --dir-cache-time 5s s3_server:{{ MODEL_URI }}  /data && rclone rcd --rc-web-gui-no-open-browser",
        		"volumes": [
        		{
          			"type": "bind",
          			"source": "/data",
          			"target": "/data",
          			"bind": {
            				"propagation": "rshared"
          			}
        		},
        		"/dev/fuse:/dev/fuse",
        		"/config:/config/rclone"
        		],
        		"privileged": true
		}
        }
      }
    }
  ]
}

